<!DOCTYPE html>
<html>
<head>
    <title>3D View Debug Test</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        body { margin: 0; overflow: hidden; }
        #info { position: absolute; top: 10px; left: 10px; color: white; font-family: Arial; }
    </style>
</head>
<body>
    <div id="info">Testing THREE.js and OrbitControls loading...</div>
    
    <script>
        // Test 1: Check if THREE is loaded
        console.log("THREE loaded:", typeof THREE !== 'undefined');
        document.getElementById('info').innerHTML += '<br>THREE loaded: ' + (typeof THREE !== 'undefined');
        
        // Test 2: Try different CDN paths for OrbitControls
        const cdnPaths = [
            "https://cdn.jsdelivr.net/gh/mrdoob/three.js@r128/examples/js/controls/OrbitControls.js",
            "https://unpkg.com/three@0.128.0/examples/js/controls/OrbitControls.js",
            "https://threejs.org/examples/js/controls/OrbitControls.js"
        ];
        
        let loaded = false;
        let currentPath = 0;
        
        function tryLoadOrbitControls() {
            if (currentPath >= cdnPaths.length) {
                document.getElementById('info').innerHTML += '<br>Failed to load OrbitControls from any CDN!';
                return;
            }
            
            const script = document.createElement('script');
            script.src = cdnPaths[currentPath];
            script.onload = function() {
                console.log("OrbitControls loaded from:", cdnPaths[currentPath]);
                document.getElementById('info').innerHTML += '<br>OrbitControls loaded from: ' + cdnPaths[currentPath];
                
                // Test creating a simple 3D scene
                createTestScene();
            };
            script.onerror = function() {
                console.log("Failed to load from:", cdnPaths[currentPath]);
                currentPath++;
                tryLoadOrbitControls();
            };
            document.head.appendChild(script);
        }
        
        function createTestScene() {
            const scene = new THREE.Scene();
            scene.background = new THREE.Color(0x222222);
            
            const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 5;
            
            const renderer = new THREE.WebGLRenderer();
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement);
            
            // Add a cube
            const geometry = new THREE.BoxGeometry();
            const material = new THREE.MeshBasicMaterial({ color: 0x00ff00 });
            const cube = new THREE.Mesh(geometry, material);
            scene.add(cube);
            
            // Try to add OrbitControls
            if (typeof THREE.OrbitControls !== 'undefined') {
                const controls = new THREE.OrbitControls(camera, renderer.domElement);
                controls.enableDamping = true;
                document.getElementById('info').innerHTML += '<br>OrbitControls initialized successfully!';
                document.getElementById('info').innerHTML += '<br>Try dragging to rotate the green cube.';
                
                function animate() {
                    requestAnimationFrame(animate);
                    controls.update();
                    cube.rotation.x += 0.01;
                    cube.rotation.y += 0.01;
                    renderer.render(scene, camera);
                }
                animate();
            } else {
                document.getElementById('info').innerHTML += '<br>OrbitControls not found on THREE object!';
                
                // Try basic animation without controls
                function animate() {
                    requestAnimationFrame(animate);
                    cube.rotation.x += 0.01;
                    cube.rotation.y += 0.01;
                    renderer.render(scene, camera);
                }
                animate();
            }
        }
        
        // Start trying to load OrbitControls
        tryLoadOrbitControls();
    </script>
</body>
</html>